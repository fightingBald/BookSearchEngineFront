{"ast":null,"code":"import _slicedToArray from \"/Users/tanghuayi/Downloads/bookfinder-app 2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/tanghuayi/Downloads/bookfinder-app 2/src/screens/book/index.js\";\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport isEmpty from \"lodash/isEmpty\";\nimport \"./book.css\";\nimport Spinner from \"react-bootstrap/Spinner\";\n\nconst createMarkup = markup => ({\n  __html: markup\n});\n\nconst Book = ({\n  match: {\n    params\n  }\n}) => {\n  const _useState = useState({}),\n        _useState2 = _slicedToArray(_useState, 2),\n        bookInfo = _useState2[0],\n        setBookInfo = _useState2[1];\n\n  const _useState3 = useState(false),\n        _useState4 = _slicedToArray(_useState3, 2),\n        isFetching = _useState4[0],\n        setIsFetching = _useState4[1];\n  /*   useEffect(() => {\n     setIsFetching(true)\n     axios.get(`https://www.googleapis.com/books/v1/volumes/${params.ID}`)\n     .then(response => {\n       setBookInfo(response.data);\n     })\n     .catch(() => {\n       setBookInfo({});\n     })\n     .finally(() => {\n       setIsFetching(false)\n     }) */\n\n\n  useEffect(() => {\n    setIsFetching(true);\n    let s = \"\";\n    let regexChecker = new RegExp(/^[0-9a-zA-Z]+$/);\n\n    if (regexChecker.test(params.ID) === true) {\n      s = \"?regex=\";\n    } else {\n      s = \"?q=\";\n    }\n\n    axios.get(\"http://localhost:8000/api/search/\".concat(s).concat(params.ID)).then(response => {\n      setBookInfo(response.results);\n    }).catch(() => {\n      setBookInfo({});\n    }).finally(() => {\n      setIsFetching(false);\n    });\n  }, [params.ID]);\n  let jsxStr = \"\";\n\n  if (isFetching) {\n    jsxStr = React.createElement(\"div\", {\n      style: {\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        height: 50\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }, React.createElement(Spinner, {\n      animation: \"border\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }));\n  }\n\n  if (!isEmpty(bookInfo)) {\n    let _bookInfo$results = bookInfo.results,\n        title = _bookInfo$results.title,\n        author = _bookInfo$results.author,\n        bookshelf = _bookInfo$results.bookshelf,\n        text = _bookInfo$results.text;\n    jsxStr = React.createElement(\"div\", {\n      className: \"book-card\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, title), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, author), React.createElement(\"div\", {\n      className: \"book-card--body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(\"figure\", {\n      className: \"book-card--thumbnail\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, bookshelf ? React.createElement(\"img\", {\n      src: bookshelf,\n      className: \"img-responsive\",\n      alt: title,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }) : null), React.createElement(\"p\", {\n      className: \"book-card--description\",\n      dangerouslySetInnerHTML: createMarkup(text),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    })));\n  }\n\n  return React.createElement(\"div\", {\n    id: \"book\",\n    className: \"page\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, jsxStr));\n};\n\nexport default Book;","map":{"version":3,"sources":["/Users/tanghuayi/Downloads/bookfinder-app 2/src/screens/book/index.js"],"names":["React","useState","useEffect","axios","isEmpty","Spinner","createMarkup","markup","__html","Book","match","params","bookInfo","setBookInfo","isFetching","setIsFetching","s","regexChecker","RegExp","test","ID","get","then","response","results","catch","finally","jsxStr","display","justifyContent","alignItems","height","title","author","bookshelf","text"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport isEmpty from \"lodash/isEmpty\";\nimport \"./book.css\";\nimport Spinner from \"react-bootstrap/Spinner\";\n\nconst createMarkup = (markup) => ({ __html: markup });\n\nconst Book = ({ match: { params } }) => {\n\tconst [bookInfo, setBookInfo] = useState({});\n\tconst [isFetching, setIsFetching] = useState(false);\n\t/*   useEffect(() => {\n    setIsFetching(true)\n    axios.get(`https://www.googleapis.com/books/v1/volumes/${params.ID}`)\n    .then(response => {\n      setBookInfo(response.data);\n    })\n    .catch(() => {\n      setBookInfo({});\n    })\n    .finally(() => {\n      setIsFetching(false)\n    }) */\n\tuseEffect(() => {\n\t\tsetIsFetching(true);\n\t\tlet s = \"\";\n\t\tlet regexChecker = new RegExp(/^[0-9a-zA-Z]+$/);\n\t\tif (regexChecker.test(params.ID) === true) {\n\t\t\ts = \"?regex=\";\n\t\t} else {\n\t\t\ts = \"?q=\";\n\t\t}\n\n\t\taxios\n\t\t\t.get(`http://localhost:8000/api/search/${s}${params.ID}`)\n\t\t\t.then((response) => {\n\t\t\t\tsetBookInfo(response.results);\n\t\t\t})\n\t\t\t.catch(() => {\n\t\t\t\tsetBookInfo({});\n\t\t\t})\n\t\t\t.finally(() => {\n\t\t\t\tsetIsFetching(false);\n\t\t\t});\n\t}, [params.ID]);\n\n\tlet jsxStr = \"\";\n\tif (isFetching) {\n\t\tjsxStr = (\n\t\t\t<div\n\t\t\t\tstyle={{\n\t\t\t\t\tdisplay: \"flex\",\n\t\t\t\t\tjustifyContent: \"center\",\n\t\t\t\t\talignItems: \"center\",\n\t\t\t\t\theight: 50,\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<Spinner animation=\"border\" />\n\t\t\t</div>\n\t\t);\n\t}\n\n\tif (!isEmpty(bookInfo)) {\n\t\tlet { title, author, bookshelf, text } = bookInfo.results;\n\n\t\tjsxStr = (\n\t\t\t<div className=\"book-card\">\n\t\t\t\t<h1>{title}</h1>\n\t\t\t\t<h3>{author}</h3>\n\t\t\t\t<div className=\"book-card--body\">\n\t\t\t\t\t<figure className=\"book-card--thumbnail\">\n\t\t\t\t\t\t{bookshelf ? (\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tsrc={bookshelf}\n\t\t\t\t\t\t\t\tclassName=\"img-responsive\"\n\t\t\t\t\t\t\t\talt={title}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t</figure>\n\t\t\t\t\t<p\n\t\t\t\t\t\tclassName=\"book-card--description\"\n\t\t\t\t\t\tdangerouslySetInnerHTML={createMarkup(text)}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tid=\"book\"\n\t\t\tclassName=\"page\"\n\t\t>\n\t\t\t<div className=\"container\">{jsxStr}</div>\n\t\t</div>\n\t);\n};\nexport default Book;\n"]},"metadata":{},"sourceType":"module"}